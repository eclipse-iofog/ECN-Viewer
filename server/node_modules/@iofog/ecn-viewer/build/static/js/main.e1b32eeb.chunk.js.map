{"version":3,"sources":["assets/logomark.svg","ECNViewer/ControllerInfo.js","ECNViewer/ActiveResources.js","Theme/ThemeProvider.js","ECNViewer/utils.js","Utils/Modal.js","Utils/Confirm.js","Utils/Alert.js","Utils/FeedbackContext.js","ControllerProvider/index.js","ECNViewer/AgentList/ConnectNode.js","Utils/Autocomplete.js","ECNViewer/AgentList/AddMicroservice.js","ECNViewer/AgentList/RemoveMicroservice.js","ECNViewer/AgentList/Tabs.js","ECNViewer/AgentList/index.js","ECNViewer/Map.js","ECNViewer/index.js","hooks/useInterval.js","Config/index.js","Layout/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","useStyles","makeStyles","theme","controllerInfo","paddingTop","& .paper","padding","warningChip","backgroundColor","concat","colors","danger","color","controllerTitle","display","justifyContent","textEmphasis","ControllerInfo","props","classes","useTheme","controller","loading","error","_ref","location","city","country","lat","lon","query","controllerError","react_default","a","createElement","className","Typography","variant","Tooltip","title","message","aria-label","Chip","label","style","--color","gold","List","ListItem","ListItemIcon","LocationCity_default","ListItemText","bundle_default","primary","cursor","onClick","selectController","GpsFixed_default","WifiTethering_default","summary","gridTemplateColumns","gridColumnGap","textAlign","ActiveResources","activeFlows","activeAgents","activeMsvcs","Paper","length","phosphorus","cobalt","chromium","argon","carbon","lead","aluminium","silver","white","createMuiTheme","Object","objectSpread","customTheme","success","Theming","ThemeProvider","children","statusColor","RUNNING","UNKNOWN","OFFLINE","msvcStatusColor","modalTitle","borderRadius","modal","width","top","left","position","modalContent","maxHeight","overflowY","modalActions","alignItems","modalAction","marginLeft","_Modal","open","onClose","Modal","assign","aria-labelledby","Close_default","actions","map","Button","text","divider","margin","Confirm","onConfirm","Divider","Grid","container","justify","spacing","item","variantIcon","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","icon","fontSize","iconVariant","opacity","marginRight","alert","boxShadow","flexDirection","bottom","zIndex","Alert","alerts","idx","variantKey","type","Icon","SnackbarContent","key","id","aria-describedby","action","IconButton","FeedbackContext","React","createContext","feedbacks","setFeedbacks","pushFeedback","ADD","REMOVE","SET","initState","nextId","reducer","state","toConsumableArray","data","timeout","setTimeout","dispatch","idxToRemove","findIndex","f","slice","Context","_React$useReducer","useReducer","_React$useReducer2","slicedToArray","console","log","Provider","value","newFeedbacks","newFeedback","push","Consumer","initControllerState","localUser","window","localStorage","getItem","controllerJson","user","JSON","parse","api","protocol","ip","port","getUrl","path","dev","hostname","join","getHeaders","headers","controllerConfig","ECN-Api-Destination","ControllerContext","updateController","lookUpControllerInfo","asyncToGenerator","regenerator_default","mark","_callee","localhost","response","wrap","_context","prev","next","host","split","RegExp","test","fetch","sent","ok","abrupt","json","Error","statusText","stop","_x","apply","this","arguments","updateControllerInfo","_ref2","_callee2","ipInfo","_context2","t0","_x2","token","ERROR","CLEAN_ERROR","UPDATE","SET_TOKEN","newState","authenticate","_ref3","_callee3","_token","_context3","method","Accept","Content-Type","body","stringify","accessToken","_x3","request","_ref4","_callee4","options","t","_args4","_context4","undefined","Authorization","_x4","_ref5","_callee5","newController","_context5","setItem","t1","t2","t3","t4","_x5","useEffect","_callee6","_context6","initNode","name","newError","ConnectNode","_React$useState","useState","_React$useState2","node","setNode","useContext","handleChange","event","defineProperty","target","createAgent","agent","uuid","getProvisioningKey","linkAgent","ioFogApi","controller-url","provisionAgent","provisioning-key","_x6","connect","iofogUuid","provisioningKey","fogType","Fragment","xs","sm","TextField","onChange","fullWidth","textField","helperText","root","flexGrow","height","paper","marginTop","marginBot","right","chip","inputRoot","flexWrap","inputInput","Autocomplete","downshift_esm","itemToString","get","initialSelectedItem","selectedItem","clearSelection","getInputProps","getItemProps","getLabelProps","getMenuProps","highlightedIndex","inputValue","isOpen","openMenu","_getInputProps","onFocus","disabled","placeholder","onBlur","inputProps","objectWithoutProperties","InputProps","ref","others","inputRef","input","renderInput","InputLabelProps","shrink","square","_ref$showEmpty","showEmpty","deburr","trim","toLowerCase","inputLength","count","suggestions","filter","suggestion","keep","maxSuggestions","startsWith","getSuggestions","index","suggestionProps","itemProps","isHighlighted","isSelected","MenuItem","selected","component","fontWeight","renderSuggestion","formControl","rowIcon","newPaper","border","inputWithIcon","MenuProps","PaperProps","ITEM_HEIGHT","initMsvc","flow","catalog","images","volumeMappings","ports","rootHostAccess","_new","initFlow","isActivated","initCatalogItem","fogTypeId","containerImage","registryId","initRoute","from","to","randomString","Math","random","toString","replace","substr","generateRouteSelect","current","list","isNewMsvc","e","m","AddMicroservice","flows","setFlows","_React$useState3","_React$useState4","setCatalog","config","useRef","ReactJsonRef","main_default","src","onAdd","updated_src","onEdit","onDelete","_React$useState5","_React$useState6","msvc","setMsvc","_React$useState7","_React$useState8","newFlow","setNewFlow","_React$useState9","_React$useState10","newCatalogItem","setNewCatalogItem","_React$useState11","_React$useState12","routes","setRoutes","Promise","all","flowRaw","flowsRes","catalogRaw","catalogRes","catalogItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","setter","prevState","handleMsvcChangeArray","objKey","valueDecorator","x","getCatalogImage","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","img","removeFromArray","addMsvc","flowId","catalogItemId","createFlow","createCatalogItem","catalogItem","_catalog","createRoute","_ref6","route","createRoutes","_ref7","_callee7","defaultUuid","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_context7","finish","createMsvc","_ref8","_callee8","_context8","onSuccess","routeList","microservices","FormControl","required","FormControlLabel","control","Checkbox","checked","v","hostDestination","containerDestination","InputLabel","htmlFor","Select","accessMode","Input","parseInt","external","internal","r","SwapHoriz_default","chips","marginBottom","RemoveMicroservice","msvcsToRemove","setMsvcsToRemove","remove","res","indexOf","msvcsPerUUID","msvcs","reduce","multiple","renderValue","TabContainer","palette","background","SimpleTabs","setValue","Tabs","newValue","child","Tab","avatarList","msvcChipList","flex","paddingRight","msvcChip","& .MuiChip-label","textOverflow","whiteSpace","overflow","jsonDisplay","minHeight","fontFamily","lineHeight","listTitle","link","secondary","&:hover","textDecoration","AgentList","openRemoveAgentConfirm","setOpenRemoveAgentConfirm","openDetailsModal","setOpenDetailsModal","openConnectNodeModal","setOpenConnectNodeModal","openAddMicroserviceModal","setOpenAddMicroserviceModal","openRemoveMicroserviceModal","setOpenRemoveMicroserviceModal","menuAnchorEl","setMenuAnchorEl","msvcsPerAgent","agents","setAgent","setAutozoom","feedbackContext","handleCloseMenu","currentTarget","removeAgent","iofog","subheader","ListSubheader","disableGutters","disableSticky","button","ListItemAvatar","Avatar","--statusColor","daemonStatus","Memory_default","size","--mTop","flowActive","MoreVert_default","Menu","anchorEl","keepMounted","Boolean","mapMarkerTransform","transform","msvcBadge","& .MuiBadge-badge","mapMarker","& .MuiSvgIcon-root","mapWrapper","borderColor","& div","hasValidCoordinates","coordinates","isFinite","Map","DomElementRef","autozoom","google","bounds","maps","LatLngBounds","latitude","longitude","center","zoom","forEach","marker","extend","LatLng","newBounds","ne","getNorthEast","lng","sw","getSouthWest","_fitBounds","fitBounds","setMap","lib_default","bootstrapURLKeys","Badge","badgeContent","invisible","--markerColor","DeveloperBoard_default","SET_AGENT","groupBy","find","updateData","ECNViewer","_useState","_useState2","_useState3","_useState4","setLoading","_useState5","_useState6","setError","_useState7","styles","mapStyle","_useState8","_React$useContext","update","agentsResponse","flowsResponse","microservicesResponse","fogs","call","callback","delay","savedCallback","setInterval","clearInterval","useInterval","centerMap","skeleton","Config","_React$useContext2","setData","save","onSave","handleUserChange","email","password","wrapper","logo","latNav","avatarContainer","latIcons",".active &","topIcons","nav","& a","& img","footerContainer","justifyItems","footer","Layout","settingsOpen","setSettingsOpen","react_router_dom","logomark","alt","Search_default","NotificationsOutlined_default","HomeOutlined_default","GraphicEqOutlined_default","SettingsOutlined_default","react_router","App","CssBaseline","ControllerProvider_Context","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e1b32eeb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logomark.0af54a67.svg\";","import React from 'react'\nimport Skeleton from 'react-loading-skeleton'\n\nimport { Typography, List, ListItem, ListItemIcon, ListItemText, Chip, Tooltip } from '@material-ui/core'\n\nimport LocationCityIcon from '@material-ui/icons/LocationCity'\nimport GPSFixedIcon from '@material-ui/icons/GpsFixed'\nimport IPIcon from '@material-ui/icons/WifiTethering'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  controllerInfo: {\n    paddingTop: '0px',\n    '& .paper': {\n      padding: '5px'\n    }\n  },\n  warningChip: {\n    backgroundColor: `var(--color, ${theme.colors.danger})`,\n    color: 'white'\n  },\n  controllerTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    textEmphasis: 'bold'\n  }\n}))\n\nexport default function ControllerInfo (props) {\n  const classes = useStyles()\n  const theme = useTheme()\n  const { controller, loading, error } = props\n  const { city, country, lat, lon, query } = controller.location || {}\n\n  const controllerError = error || controller.error || null\n\n  return (\n    <div className={classes.controllerInfo}>\n      <div className={classes.controllerTitle}>\n        <Typography variant='h5'>Controller</Typography>\n        {controllerError &&\n          <Tooltip title={controllerError.message} aria-label='Error'>\n            <Chip label={'The controller is not reachable'} style={{ '--color': theme.colors.gold }} className={classes.warningChip} />\n          </Tooltip>\n        }\n      </div>\n      <List>\n        <ListItem>\n          <ListItemIcon><LocationCityIcon /></ListItemIcon>\n          { loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${city}, ${country}`} /> }\n        </ListItem>\n        <ListItem style={{ cursor: 'pointer' }} onClick={() => props.selectController()} >\n          <ListItemIcon><GPSFixedIcon /></ListItemIcon>\n          { loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${lat}, ${lon}`} /> }\n        </ListItem>\n        <ListItem>\n          <ListItemIcon><IPIcon /></ListItemIcon>\n          { loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={query} /> }\n        </ListItem>\n      </List>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport { Typography, Paper } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles({\n  summary: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, 1fr)',\n    gridColumnGap: '15px',\n    textAlign: 'center'\n  }\n})\n\nexport default function ActiveResources (props) {\n  const classes = useStyles()\n  const { activeFlows, activeAgents, activeMsvcs, loading } = props\n  return (\n    <div>\n      <Typography variant='h5'>Active resources</Typography>\n      <br />\n      <div className={classes.summary}>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeFlows.length}</Typography>\n          <Typography variant='subtitle1'>Flows</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeAgents.length}</Typography>\n          <Typography variant='subtitle1'>Agents</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeMsvcs.length}</Typography>\n          <Typography variant='subtitle1'>Microservices</Typography>\n        </Paper>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\nimport customTheme from './theme.json'\n\nconst colors = {\n  phosphorus: '#FF585D',\n  cobalt: '#5064EC',\n  gold: '#F5A623',\n  chromium: '#00C0A9',\n  argon: '#7A3BFF',\n  carbon: '#002E43',\n  lead: '#57687D',\n  aluminium: '#ACB5C6',\n  silver: '#FAFCFF',\n  white: '#FFFFFF'\n}\n\nexport const theme = createMuiTheme({\n  ...customTheme,\n  colors: {\n    ...colors,\n    success: colors.chromium,\n    error: colors.phosphorus,\n    danger: colors.gold\n  }\n})\n\nexport default function Theming (props) {\n  return (\n    <ThemeProvider theme={theme}>\n      {props.children}\n    </ThemeProvider>\n  )\n}\n","import { theme } from '../Theme/ThemeProvider'\n\nexport const statusColor = {\n  'RUNNING': theme.colors.chromium,\n  'UNKNOWN': theme.colors.aluminium,\n  'OFFLINE': theme.colors.phosphorus\n}\n\nexport const msvcStatusColor = {\n  'RUNNING': theme.colors.cobalt,\n  'UNKNOWN': theme.colors.aluminium,\n  'OFFLINE': theme.colors.aluminium\n}\n","import React from 'react'\nimport { Modal, Paper, Typography, Button } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  modalTitle: {\n    backgroundColor: theme.colors.carbon,\n    borderRadius: '4px 4px 0 0',\n    color: 'white',\n    padding: '5px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  modal: {\n    width: '60%',\n    top: '15%',\n    left: '20%',\n    position: 'absolute',\n    borderRadius: '4px'\n  },\n  modalContent: {\n    maxHeight: '600px',\n    overflowY: 'scroll',\n    padding: '15px'\n  },\n  modalActions: {\n    display: 'flex',\n    backgroundColor: theme.colors.silver,\n    alignItems: 'flex-end'\n  },\n  modalAction: {\n    marginLeft: '5px'\n  }\n}))\n\nexport default function _Modal (props) {\n  const classes = useStyles()\n  const { title, open, onClose } = props\n  return (\n    <Modal\n      aria-labelledby={`${title} modal`}\n      {...{\n        open,\n        onClose\n      }}\n    >\n      <Paper className={classes.modal}>\n        <div className={classes.modalTitle}>\n          <Typography variant='h5'>{title}</Typography>\n          <CloseIcon style={{ cursor: 'pointer' }} onClick={onClose} />\n        </div>\n        <div className={classes.modalContent}>\n          {props.children}\n        </div>\n        {props.actions && !!props.actions.length && <div className={classes.modalActions}>\n          {props.actions.map(a => <Button className={`${a.className} ${classes.modalAction}`} variant={a.variant} onClick={a.onClick}>{a.text}</Button>)}\n        </div>}\n      </Paper>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Button, Divider, Grid } from '@material-ui/core'\n\nimport Modal from './Modal'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  divider: {\n    margin: '5px'\n  }\n}))\n\nexport default function Confirm (props) {\n  const classes = useStyles()\n  const { open, onClose, title, onConfirm } = props\n  return (\n    <Modal\n      {...{\n        title,\n        open,\n        onClose\n      }}\n    >\n      {props.children}\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end' spacing={2}>\n        <Grid item>\n          <Button onClick={onClose}>\n            Cancel\n          </Button>\n        </Grid>\n        <Grid item>\n          <Button variant='contained' color='primary' onClick={onConfirm}>\n            Confirm\n          </Button>\n        </Grid>\n      </Grid>\n\n    </Modal>\n  )\n}\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport InfoIcon from '@material-ui/icons/Info'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { SnackbarContent } from '@material-ui/core'\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon\n}\n\nconst useStyles = makeStyles(theme => ({\n  success: {\n    backgroundColor: theme.colors.success\n  },\n  error: {\n    backgroundColor: theme.colors.error\n  },\n  info: {\n    backgroundColor: theme.colors.cobalt\n  },\n  warning: {\n    backgroundColor: theme.colors.danger\n  },\n  icon: {\n    fontSize: 20\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1)\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  alert: {\n    margin: '5px',\n    borderRadius: '4px',\n    boxShadow: `0 4px 6px 0 ${theme.colors.carbon}`\n  },\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'fixed',\n    bottom: '10px',\n    left: '10px',\n    zIndex: '9999'\n  }\n}))\n\nexport default function Alert (props) {\n  const classes = useStyles()\n  const { open, alerts } = props\n\n  return open ? (\n    <div className={classes.container}>\n      {alerts.map((a, idx) => {\n        const variantKey = a.type || 'info'\n        const Icon = variantIcon[variantKey]\n        return <SnackbarContent\n          key={a.key || a.id || idx}\n          className={`${classes[variantKey]} ${classes.alert} ${a.className}`}\n          aria-describedby='client-snackbar'\n          message={\n            <span id='client-snackbar' className={classes.message}>\n              <Icon className={`${classes.icon} ${classes.iconVariant}`} />\n              {a.message}\n            </span>\n          }\n          action={[\n            <IconButton key='close' aria-label='Close' color='inherit' onClick={a.onClose}>\n              <CloseIcon className={classes.icon} />\n            </IconButton>\n          ]}\n        />\n      })}\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport { findIndex } from 'lodash'\nimport Alert from './Alert'\n\nexport const FeedbackContext = React.createContext({\n  feedbacks: [],\n  setFeedbacks: () => {},\n  pushFeedback: () => {}\n})\n\nconst AUTO_HIDE = 6000\n\nconst actions = {\n  ADD: 'add',\n  REMOVE: 'remove',\n  SET: 'set'\n}\n\nconst initState = {\n  feedbacks: [],\n  nextId: 0\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.ADD:\n      return {\n        feedbacks: [...state.feedbacks,\n          {\n            ...action.data,\n            timeout: setTimeout(() => {\n              action.dispatch({ type: actions.REMOVE, data: { id: state.nextId } })\n            }, AUTO_HIDE),\n            id: state.nextId\n          }],\n        nextId: state.nextId + 1\n      }\n    case actions.REMOVE:\n      const idxToRemove = findIndex(state.feedbacks, f => f.id === action.data.id)\n      if (idxToRemove === -1) return state\n      return {\n        ...state,\n        feedbacks: [...state.feedbacks.slice(0, idxToRemove), ...state.feedbacks.slice(idxToRemove + 1)]\n      }\n    case actions.SET:\n      return {\n        ...state,\n        feedbacks: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const setFeedbacks = (newFeedbacks) => {\n    console.log(' ---> SetFeedbacks ')\n    dispatch({ type: actions.SET, data: newFeedbacks })\n  }\n  const pushFeedback = (newFeedback) => {\n    console.log(' ---> pushFeedback ')\n    dispatch({ type: actions.ADD, data: newFeedback, dispatch })\n    // Update current feedback array (same array will be used if multiple calls to pushFeedback in the same render loop)\n    state.feedbacks.push(newFeedback)\n  }\n\n  console.log('======> Updating feedback context')\n\n  return <FeedbackContext.Provider value={{ feedbacks: state.feedbacks, setFeedbacks, pushFeedback }}>\n    {props.children}\n    <FeedbackContext.Consumer>\n      {({ feedbacks, setFeedbacks }) =>\n        <Alert\n          open={!!feedbacks.length}\n          alerts={feedbacks.map((f, idx) => ({\n            ...f,\n            onClose: () => dispatch({ type: actions.REMOVE, data: f })\n          }))}\n        />\n      }\n    </FeedbackContext.Consumer>\n  </FeedbackContext.Provider>\n}\n","import React, { useEffect } from 'react'\n\nimport controllerJson from './controller.json'\n\nconst initControllerState = (() => {\n  const localUser = window.localStorage.getItem('iofogUser')\n  if (localUser) {\n    controllerJson.user = JSON.parse(localUser)\n  }\n  return {\n    ...controllerJson,\n    api: `${window.location.protocol}//${controllerJson.ip}:${controllerJson.port || 80}/`,\n    location: {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerJson.ip\n    }\n  }\n})()\n\nconst IPLookUp = 'http://ip-api.com/json/'\n\n// If dev mode, use proxy\n// Otherwise assume you are running on the Controller\nconst getUrl = (path) => controllerJson.dev ? `/api/controllerApi${path}` : `${window.location.protocol}//${[window.location.hostname, controllerJson.port].join(':')}${path}`\nconst getHeaders = (headers, controllerConfig) => controllerJson.dev\n  ? ({\n    ...headers,\n    'ECN-Api-Destination': controllerConfig.api\n  }) : headers\n\nexport const ControllerContext = React.createContext({\n  controller: {},\n  updateController: () => {}\n})\n\nconst lookUpControllerInfo = async (controllerConfig) => {\n  if (!controllerConfig.ip) {\n    controllerConfig.ip = window.location.host.split(':')[0] // Get only ip, not port\n  }\n  const localhost = new RegExp('(0\\.0\\.0\\.0|localhost|127\\.0\\.0\\.1|192\\.168\\.)') // eslint-disable-line no-useless-escape\n  const ip = localhost.test(controllerConfig.ip) ? '8.8.8.8' : controllerConfig.ip\n  const response = await window.fetch(IPLookUp + ip)\n  if (response.ok) {\n    return response.json()\n  } else {\n    throw new Error(response.statusText)\n  }\n}\n\nconst updateControllerInfo = async (controllerConfig) => {\n  let ipInfo = {}\n  try {\n    ipInfo = await lookUpControllerInfo(controllerConfig)\n  } catch (e) {\n    ipInfo = {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerConfig.ip\n    }\n  }\n\n  return {\n    ...controllerConfig,\n    location: ipInfo\n  }\n}\n\nconst initState = {\n  controller: initControllerState,\n  token: null\n}\n\nconst actions = {\n  ERROR: 'Error',\n  CLEAN_ERROR: 'Clean error',\n  UPDATE: 'Update',\n  SET_TOKEN: 'Set token'\n}\n\nconst reducer = (state, action) => {\n  console.log({ state, action })\n  const newState = (() => {\n    switch (action.type) {\n      case actions.ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: action.data\n          }\n        }\n      case actions.CLEAN_ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      case actions.UPDATE:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            ...action.data\n          }\n        }\n      case actions.SET_TOKEN:\n        return {\n          ...state,\n          token: action.data,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      default:\n        return state\n    }\n  })()\n  newState.controller.dev = controllerJson.dev\n  return newState\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const { token, controller } = state\n\n  console.log('======> Updating controller context')\n\n  const authenticate = async (controllerConfig) => {\n    const response = await window.fetch(getUrl('/api/v3/user/login'), {\n      method: 'POST',\n      headers: getHeaders({\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }, controllerConfig),\n      body: JSON.stringify(controllerConfig.user)\n    })\n    if (response.ok) {\n      const token = (await response.json()).accessToken\n      dispatch({ type: actions.SET_TOKEN, data: token })\n      return token\n    } else {\n      dispatch({ type: actions.SET_TOKEN, data: null })\n      throw new Error(response.statusText)\n    }\n  }\n\n  // Wrapper around window.fetch to add proxy and authorization headers\n  const request = async (path, options = {}) => {\n    try {\n      let t = token\n      if (!t) {\n        t = await authenticate(controller)\n      }\n      const response = await window.fetch(getUrl(path), {\n        ...options,\n        headers: getHeaders({\n          ...options.headers,\n          'Authorization': t\n        }, controller)\n      })\n      if (state.controller.error) {\n        dispatch({ type: actions.CLEAN_ERROR })\n      }\n      return response\n    } catch (err) {\n      dispatch({ type: actions.ERROR, data: err })\n      return ({\n        ok: false,\n        statusText: err.message || 'Could not reach controller'\n      })\n    }\n  }\n\n  const updateController = async (newController) => {\n    if (controllerJson.dev) { newController.api = `http://${newController.ip}:${newController.port || 80}/` }\n    window.localStorage.setItem('iofogUser', JSON.stringify(newController.user))\n    try {\n      await authenticate(newController)\n    } catch (e) {\n      dispatch({ type: actions.ERROR, data: e })\n    }\n    dispatch({ type: actions.UPDATE, data: await updateControllerInfo(newController) })\n  }\n\n  useEffect(() => (async () => {\n    try {\n      await authenticate(initState.controller)\n    } catch (e) {\n      dispatch({ type: actions.ERROR, data: e })\n    }\n    dispatch({ type: actions.UPDATE, data: await updateControllerInfo(initState.controller) })\n  })(), [])\n\n  return <ControllerContext.Provider value={{ controller, updateController, request }}>\n    {props.children}\n  </ControllerContext.Provider>\n}\n","import React from 'react'\n\nimport { Divider, TextField, Grid, Button } from '@material-ui/core'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst initNode = {\n  name: '',\n  ip: '',\n  key: '',\n  port: 54321\n}\n\nconst newError = (message) => ({ message })\n\nexport default function ConnectNode (props) {\n  const classes = useStyles()\n  const [node, setNode] = React.useState({ ...initNode })\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  const handleChange = key => (event) => {\n    setNode({ ...node, [key]: event.target.value })\n  }\n\n  const createAgent = async (agent) => {\n    const response = await request('/api/v3/iofog', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(agent)\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'ioFog created!', type: 'success' })\n      const a = await response.json()\n      return a.uuid\n    }\n    throw (newError(`Failed to create iofog: ${response.statusText}`))\n  }\n\n  const getProvisioningKey = async (uuid) => {\n    const response = await request(`/api/v3/iofog/${uuid}/provisioning-key`)\n    if (response.ok) {\n      const a = await response.json()\n      return a.key\n    }\n    throw (newError(`Failed to retrieve provisioning key: ${response.statusText}`))\n  }\n\n  const linkAgent = async (agent, controller) => {\n    const response = await window.fetch(`api/agentApi/v2/config`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': agent.key,\n        'ioFogApi': `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'controller-url': `http://${controller.ip}:${controller.port}/api/v3/` })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent linked!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to link agent: ${response.statusText}`))\n  }\n\n  const provisionAgent = async (agent, key) => {\n    const response = await window.fetch(`api/agentApi/v2/provision`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': agent.key,\n        'ioFogApi': `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'provisioning-key': key })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent provisioned!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to provision agent: ${response.statusText}`))\n  }\n\n  const connect = async () => {\n    try {\n      const iofogUuid = await createAgent({ name: node.name, fogType: 0 })\n      const provisioningKey = await getProvisioningKey(iofogUuid)\n      await linkAgent(node, props.controller)\n      await provisionAgent(node, provisioningKey)\n      pushFeedback({ message: 'Agent connected!', type: 'success' })\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='name'\n            label='Name'\n            onChange={handleChange('name')}\n            value={node.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='ip'\n            label='IP'\n            onChange={handleChange('ip')}\n            value={node.ip}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='port'\n            label='Port'\n            onChange={handleChange('port')}\n            value={node.port}\n            fullWidth\n            type='number'\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            id='key'\n            label='Authorization key'\n            onChange={handleChange('key')}\n            value={node.key}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            helperText='Authorization key can be found in /etc/iofog-agent/local-api file'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={connect}>\n            Connect\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport Downshift from 'downshift'\nimport deburr from 'lodash/deburr'\nimport get from 'lodash/get'\nimport { MenuItem, Paper, TextField } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: 250\n  },\n  container: {\n    flexGrow: 1,\n    position: 'relative'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    marginBot: theme.spacing(2),\n    left: 0,\n    right: 0,\n    maxHeight: '250px',\n    overflowY: 'scroll'\n  },\n  chip: {\n    margin: theme.spacing(0.5, 0.25)\n  },\n  inputRoot: {\n    flexWrap: 'wrap'\n  },\n  inputInput: {\n    width: 'auto',\n    flexGrow: 1\n  },\n  divider: {\n    height: theme.spacing(2)\n  }\n}))\n\nfunction renderInput (inputProps) {\n  const { InputProps, classes, ref, ...others } = inputProps\n  return (\n    <TextField\n      InputProps={{\n        inputRef: ref,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        ...InputProps\n      }}\n      {...others}\n    />\n  )\n}\n\nfunction renderSuggestion (suggestionProps) {\n  const { suggestion, index, itemProps, highlightedIndex, selectedItem } = suggestionProps\n  const isHighlighted = highlightedIndex === index\n  const isSelected = (selectedItem || {}).label === suggestion.label\n\n  return (\n    <MenuItem\n      {...itemProps}\n      key={suggestion.label}\n      selected={isHighlighted}\n      component='div'\n      style={{\n        fontWeight: isSelected ? 500 : 400\n      }}\n    >\n      {suggestion.label}\n    </MenuItem>\n  )\n}\n\nexport default function Autocomplete (props) {\n  const classes = useStyles()\n\n  const getSuggestions = (value, { showEmpty = false } = {}) => {\n    const inputValue = deburr(value.trim()).toLowerCase()\n    const inputLength = inputValue.length\n    let count = 0\n\n    return inputLength === 0 && !showEmpty\n      ? []\n      : props.suggestions.filter(suggestion => {\n        const keep = count < props.maxSuggestions && suggestion.label.toLowerCase().startsWith(inputValue.toLowerCase())\n        if (keep) {\n          count += 1\n        }\n        return keep\n      })\n  }\n\n  return (<Downshift\n    itemToString={item => get(item, 'label', '')}\n    onChange={props.onChange}\n    initialSelectedItem={props.initialSelectedItem}\n    {...(props.selectedItem ? { selectedItem: props.selectedItem } : {})}\n    id='downshift-options'>\n    {({\n      clearSelection,\n      getInputProps,\n      getItemProps,\n      getLabelProps,\n      getMenuProps,\n      highlightedIndex,\n      inputValue,\n      isOpen,\n      openMenu,\n      selectedItem\n    }) => {\n      const { onBlur, onChange, onFocus, ...inputProps } = getInputProps({\n        onChange: event => {\n          if (event.target.value === '') {\n            clearSelection()\n          }\n        },\n        onFocus: openMenu,\n        disabled: props.disabled || false,\n        placeholder: props.placeholder || ''\n      })\n\n      return (\n        <div className={classes.container}>\n          {renderInput({\n            fullWidth: true,\n            classes,\n            label: props.label,\n            InputLabelProps: getLabelProps({ shrink: true }),\n            InputProps: { onBlur, onChange, onFocus },\n            inputProps\n          })}\n\n          <div {...getMenuProps()}>\n            {isOpen ? (\n              <Paper className={classes.paper} square>\n                {getSuggestions(inputValue, { showEmpty: true }).map((suggestion, index) =>\n                  renderSuggestion({\n                    suggestion,\n                    index,\n                    itemProps: getItemProps({ item: suggestion }),\n                    highlightedIndex,\n                    selectedItem\n                  })\n                )}\n              </Paper>\n            ) : null}\n          </div>\n        </div>\n      )\n    }}\n  </Downshift>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\nimport get from 'lodash/get'\n\nimport { Grid, Paper, Typography, TextField, Divider, Select, Input, Button, InputLabel, FormControl, FormControlLabel, Checkbox, MenuItem } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport SwapIcon from '@material-ui/icons/SwapHoriz'\n\nimport Autocomplete from '../../Utils/Autocomplete'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  },\n  formControl: {\n    width: '100%'\n  },\n  rowIcon: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  newPaper: {\n    border: '1px solid hsla(0, 0%, 0%, 0.2)',\n    boxShadow: '0 4px 6px 0 hsla(0,0%,0%,0.2)',\n    borderRadius: '4px',\n    padding: '10px',\n    marginTop: '10px'\n  },\n  inputWithIcon: { display: 'flex', alignItems: 'baseline', justifyContent: 'space-between' }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nconst initMsvc = {\n  flow: {},\n  name: '',\n  catalog: {\n    images: []\n  },\n  volumeMappings: [],\n  ports: [],\n  rootHostAccess: false,\n  _new: true\n}\n\nconst initFlow = {\n  name: '',\n  isActivated: true\n}\n\nconst initCatalogItem = (fogTypeId) => ({\n  name: '',\n  images: [{\n    containerImage: '',\n    fogTypeId\n  }],\n  registryId: 1\n})\n\nconst initRoute = (from) => ({\n  from,\n  to: {}\n})\n\nconst randomString = () => Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5)\n\nconst generateRouteSelect = (current, list, label, onChange) => {\n  const isNewMsvc = get(current, '_new', false)\n  return (<Autocomplete\n    label={label}\n    placeholder='Select a microservice'\n    onChange={onChange}\n    disabled={isNewMsvc}\n    selectedItem={isNewMsvc ? list[list.length - 1] : current}\n    maxSuggestions={20}\n    suggestions={list.filter(e => !isNewMsvc ? !!e.uuid : true).map(m => ({\n      ...m,\n      label: m.name\n    }))}\n  />)\n}\n\nexport default function AddMicroservice (props) {\n  const classes = useStyles()\n  const [ flows, setFlows ] = React.useState([])\n  const [ catalog, setCatalog ] = React.useState([])\n  // Due to polling, the component is re-rendering every 3 sec.\n  // To avoid JSON edit popups to be closed every 3 sec,\n  // we need to keep the config and the JSX ReactJson component as ref\n  const config = React.useRef({})\n  const ReactJsonRef = React.useRef(\n    <ReactJson src={config.current} name={false} onAdd={(e) => { config.current = e.updated_src }} onEdit={(e) => { config.current = e.updated_src }} onDelete={(e) => { config.current = e.updated_src }} />\n  )\n  const [ msvc, setMsvc ] = React.useState(initMsvc)\n  const [ newFlow, setNewFlow ] = React.useState(initFlow)\n  const [ newCatalogItem, setNewCatalogItem ] = React.useState(() => initCatalogItem(get(props, 'target.fogTypeId', 1)))\n  const [ routes, setRoutes ] = React.useState([])\n\n  const agent = props.target\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  React.useEffect(() => {\n    Promise.all([(async () => {\n      const flowRaw = await request('/api/v3/flow')\n      if (flowRaw.ok) {\n        const flowsRes = await flowRaw.json()\n        setFlows(flowsRes.flows)\n      }\n    })(), (async () => {\n      const catalogRaw = await request('/api/v3/catalog/microservices')\n      if (catalogRaw.ok) {\n        const catalogRes = await catalogRaw.json()\n        setCatalog(catalogRes.catalogItems.filter(item => {\n          for (const img of item.images) {\n            if (img.fogTypeId === agent.fogTypeId) { return true }\n          }\n          return false\n        })) // TODO: filter per userId\n      }\n    })()])\n  }, [agent.fogTypeId, request])\n\n  const handleChange = (key, setter, prevState) => e => setter({ ...prevState, [key]: e.target.value })\n  const handleMsvcChangeArray = (key, objKey, idx, valueDecorator = x => x) => e => setMsvc({\n    ...msvc,\n    [key]: [\n      ...msvc[key].slice(0, idx),\n      {\n        ...msvc[key][idx],\n        [objKey]: valueDecorator(e.target.value)\n      },\n      ...msvc[key].slice(idx + 1)\n    ]\n  })\n  const getCatalogImage = item => {\n    if (!get(item, 'id', null)) { return 'Select an image' }\n    for (const img of item.images) {\n      if (img.fogTypeId === agent.fogTypeId) { return img.containerImage }\n    }\n    return 'Image not found'\n  }\n\n  const addVolume = () => setMsvc({\n    ...msvc,\n    volumeMappings: [\n      ...msvc.volumeMappings,\n      {\n        hostDestination: '',\n        containerDestination: '',\n        accessMode: 'z'\n      }\n    ]\n  })\n\n  const addPort = () => setMsvc({\n    ...msvc,\n    ports: [\n      ...msvc.ports,\n      {\n        internal: '',\n        external: ''\n      }\n    ]\n  })\n\n  const removeFromArray = (key, idx) => setMsvc({\n    ...msvc,\n    [key]: [...msvc[key].slice(0, idx), ...msvc[key].slice(idx + 1)]\n  })\n\n  const addMsvc = async () => {\n    try {\n      const { name, ports, volumeMappings, rootHostAccess } = msvc\n      const response = await request('/api/v3/microservices', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          config: JSON.stringify(config.current),\n          name,\n          ports,\n          volumeMappings,\n          rootHostAccess,\n          flowId: msvc.flow.id,\n          iofogUuid: agent.uuid,\n          catalogItemId: msvc.catalog.id\n        })\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Microservice added!', type: 'success' })\n        const m = await response.json()\n        setMsvc(initMsvc)\n        return m.uuid\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n    }\n  }\n\n  const createFlow = async () => {\n    try {\n      const { name } = newFlow\n      const response = await request('/api/v3/flow', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newFlow)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Flow created!', type: 'success' })\n        setNewFlow(initFlow)\n        const flow = { ...await response.json(), name }\n        setMsvc({ ...msvc, flow })\n        msvc.flow = flow\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createCatalogItem = async () => {\n    try {\n      const catalogItem = {\n        ...newCatalogItem,\n        name: randomString()\n      }\n      const response = await request('/api/v3/catalog/microservices', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(catalogItem)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Image added to catalog!', type: 'success' })\n        setNewCatalogItem(initCatalogItem(agent.fogTypeId))\n        const catalog = { ...await response.json(), ...catalogItem }\n        setMsvc({ ...msvc, catalog })\n        msvc.catalog = catalog\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoute = async (route) => {\n    try {\n      const from = get(route, 'from.uuid')\n      const to = get(route, 'to.uuid')\n      const response = await request(`/api/v3//microservices/${from}/routes/${to}`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: ''\n      })\n      if (response.ok) {\n        pushFeedback({ message: `Route from ${route.from.name} to ${route.to.name} created !`, type: 'success' })\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoutes = async (defaultUuid) => {\n    for (const route of routes) {\n      if (!route.from.uuid) {\n        route.from.uuid = defaultUuid\n      }\n      if (!route.to.uuid) {\n        route.to.uuid = defaultUuid\n      }\n      await createRoute(route)\n    }\n  }\n\n  const createMsvc = async () => {\n    let success = true\n    try {\n      if (msvc.flow.id === -1) {\n        success = await createFlow()\n      }\n      if (success && msvc.catalog.id === -1) {\n        success = await createCatalogItem()\n      }\n      if (success) {\n        const uuid = await addMsvc()\n        await createRoutes(uuid)\n        props.onSuccess()\n      }\n    } catch (e) {\n\n    }\n  }\n\n  const routeList = (props.microservices || [])\n    .map(m => ({\n      ...m,\n      label: m.name\n    }))\n    .concat([{\n      ...msvc,\n      label: msvc.name ? msvc.name : '<New microservice>'\n    }])\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Flow'\n              placeholder='Select a flow'\n              onChange={(selected, state) => {\n                handleChange('flow', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={flows.map(f => ({\n                ...f,\n                label: f.name\n              })).concat([{\n                id: -1,\n                label: '+ Add a flow'\n              }])}\n            />\n          </FormControl>\n          {msvc.flow.id === -1 && <Paper className={classes.newPaper}>\n            <Typography variant='subtitle2'>New flow</Typography>\n            <TextField\n              id='name'\n              label='Name'\n              required\n              onChange={handleChange('name', setNewFlow, newFlow)}\n              value={newFlow.name}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n            />\n            <FormControlLabel\n              style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n              control={\n                <Checkbox\n                  checked={newFlow.isActivated}\n                  onChange={e => setNewFlow({ ...newFlow, isActivated: e.target.checked })}\n                  value='checkedB'\n                  color='primary'\n                />\n              }\n              label='Active'\n            />\n          </Paper>}\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Image'\n              placeholder='Select an image'\n              onChange={(selected, state) => {\n                handleChange('catalog', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={catalog.map(m => ({\n                ...m,\n                label: getCatalogImage(m)\n              })).concat([{\n                id: -1,\n                label: '+ Add an image'\n              }])}\n            />\n          </FormControl>\n          {msvc.catalog.id === -1 && <Paper className={classes.newPaper}>\n            <Typography variant='subtitle2'>New image</Typography>\n            <TextField\n              id='name'\n              label='Name'\n              required\n              onChange={e => setNewCatalogItem({\n                ...newCatalogItem,\n                images: [{\n                  ...newCatalogItem.images[0],\n                  containerImage: e.target.value\n                }]\n              })}\n              value={newCatalogItem.images[0].containerImage}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n            />\n          </Paper>}\n        </Grid>\n      </Grid>\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <TextField\n            id='name'\n            label='Name'\n            required\n            onChange={handleChange('name', setMsvc, msvc)}\n            value={msvc.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Configuration</Typography><br />\n          {ReactJsonRef.current}\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Volumes</Typography><br />\n          {msvc.volumeMappings.map((v, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='host'\n                      label='Host'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'hostDestination', idx)}\n                      value={v.hostDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='Container'\n                      label='Container'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'containerDestination', idx)}\n                      value={v.containerDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4} >\n                    <FormControl className={classes.formControl} style={{ marginTop: '5px' }}>\n                      <InputLabel htmlFor='select-flow'>Access mode</InputLabel>\n                      <Select\n                        required\n                        value={v.accessMode}\n                        onChange={handleMsvcChangeArray('volumeMappings', 'accessMode', idx)}\n                        input={<Input id='select-flow-input' />}\n                        MenuProps={MenuProps}\n                      >\n                        <MenuItem value='z'>Z</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('volumeMappings', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addVolume()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Ports</Typography><br />\n          {msvc.ports.map((p, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2} >\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='host'\n                      label='External'\n                      required\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'external', idx, parseInt)}\n                      value={p.external}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='Container'\n                      label='Internal'\n                      required\n                      fullWidth\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'internal', idx, parseInt)}\n                      value={p.internal}\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('ports', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addPort()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Routes</Typography><br />\n          {routes.map((r, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2} style={{ alignItems: 'flex-end' }} >\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.from, routeList, 'From', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        from: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                  <Grid item xs={2} className={classes.rowIcon}>\n                    <SwapIcon style={{ cursor: 'pointer' }} onClick={() => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        from: r.to,\n                        to: r.from\n                      },\n                      ...routes.slice(idx + 1)\n                    ])} />\n                  </Grid>\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.to, routeList, 'To', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        to: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => setRoutes([...routes.slice(0, idx), ...routes.slice(idx + 1)])} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => setRoutes([...routes, initRoute(msvc)])}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <FormControlLabel\n        style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n        control={\n          <Checkbox\n            checked={msvc.rootHostAccess}\n            onChange={e => setMsvc({ ...msvc, rootHostAccess: e.target.checked })}\n            value='checkedB'\n            color='primary'\n          />\n        }\n        label='Root host access'\n      />\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={createMsvc}>\n            Add\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\n\nimport { FormControl, Divider, Grid, Button, Input, InputLabel, Select, MenuItem, Checkbox, ListItemText, Chip } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    margin: 2\n  },\n  formControl: {\n    width: '100%',\n    marginBottom: '15px'\n  },\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nexport default function RemoveMicroservice (props) {\n  const classes = useStyles()\n  const [msvcsToRemove, setMsvcsToRemove] = React.useState([])\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  function handleChange (event) {\n    setMsvcsToRemove(event.target.value)\n  }\n\n  const remove = async () => {\n    try {\n      let success = true\n      for (const uuid of msvcsToRemove) {\n        const res = request(`/api/v3/microservices/${uuid}`, {\n          method: 'DELETE'\n        })\n        if (!res.ok) {\n          success = false\n          pushFeedback({ message: `${msvcsPerUUID[uuid].name}: ${res.statusText}`, type: 'error', uuid })\n        } else {\n          const idx = msvcsToRemove.indexOf(uuid)\n          setMsvcsToRemove([...msvcsToRemove.slice(0, idx), ...msvcsToRemove.slice(idx + 1)])\n        }\n      }\n      if (success) {\n        pushFeedback({ message: 'Microservices removed', type: 'success', uuid: 'success' })\n        props.onSuccess()\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  const { msvcs } = props\n\n  const msvcsPerUUID = msvcs.reduce((r, m) => ({\n    ...r,\n    [m.uuid]: m\n  }), {})\n\n  return (\n    <React.Fragment>\n      <FormControl className={classes.formControl}>\n        <InputLabel htmlFor='select-multiple-checkbox'>Microservices to remove</InputLabel>\n        <Select\n          multiple\n          value={msvcsToRemove}\n          onChange={handleChange}\n          input={<Input id='select-multiple-checkbox-rm-msvcs' />}\n          renderValue={selected => (\n            <div className={classes.chips}>\n              {selected.map(uuid => (\n                msvcsPerUUID[uuid] && <Chip key={uuid} label={msvcsPerUUID[uuid].name} className={classes.chip} />\n              ))}\n            </div>\n          )}\n          MenuProps={MenuProps}\n        >\n          {msvcs.map(m => (\n            <MenuItem key={m.uuid} value={m.uuid}>\n              <Checkbox checked={msvcsToRemove.indexOf(m.uuid) > -1} />\n              <ListItemText primary={m.name} />\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={remove}>\n            Remove\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\n\nfunction TabContainer (props) {\n  return (\n    <Typography component='div' style={{ padding: 8 * 3 }}>\n      {props.children}\n    </Typography>\n  )\n}\n\nTabContainer.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper\n  }\n}))\n\nexport default function SimpleTabs (props) {\n  const classes = useStyles()\n  const [value, setValue] = React.useState(0)\n\n  function handleChange (event, newValue) {\n    setValue(newValue)\n  }\n\n  return (\n    <div className={classes.root}>\n      <Tabs value={value} onChange={handleChange}>\n        {props.children.map(child => {\n          return (\n            <Tab label={child.props.title} />\n          )\n        })}\n      </Tabs>\n      <TabContainer>{props.children[value]}</TabContainer>\n    </div>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\n\nimport { Divider, List, ListItem, ListSubheader, ListItemAvatar, Chip, Avatar, ListItemText, Menu, MenuItem, Typography } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport MemoryIcon from '@material-ui/icons/Memory'\n\nimport { makeStyles } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor } from '../utils'\nimport Modal from '../../Utils/Modal'\nimport Confirm from '../../Utils/Confirm'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\n\nimport ConnectNode from './ConnectNode'\nimport AddMicroservice from './AddMicroservice'\nimport RemoveMicroservice from './RemoveMicroservice'\nimport SimpleTabs from './Tabs'\nimport { ControllerContext } from '../../ControllerProvider'\n\nconst useStyles = makeStyles(theme => ({\n  avatarList: {\n    color: 'white',\n    backgroundColor: 'var(--statusColor, white)',\n    boxShadow: `0px 2px 2px ${theme.colors.carbon}`\n  },\n  msvcChipList: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '20%',\n    flex: '1',\n    paddingRight: '15px'\n  },\n  msvcChip: {\n    marginTop: 'var(--mTop, 0px)',\n    backgroundColor: `var(--color, ${theme.colors.cobalt})`,\n    fontSize: '10px',\n    borderRadius: '5px',\n    height: '20px',\n    margin: '2px',\n    width: '100px',\n    color: 'white',\n    '& .MuiChip-label': {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      display: 'block'\n    }\n  },\n  jsonDisplay: {\n    width: '99%',\n    minHeight: '30rem',\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    fontSize: '0.8rem',\n    lineHeight: '1.2'\n  },\n  listTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    color: theme.palette.text.primary\n  },\n  link: {\n    color: theme.palette.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  }\n}))\n\nexport default function AgentList (props) {\n  const classes = useStyles()\n  const [openRemoveAgentConfirm, setOpenRemoveAgentConfirm] = React.useState(false)\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openConnectNodeModal, setOpenConnectNodeModal] = React.useState(false)\n  const [openAddMicroserviceModal, setOpenAddMicroserviceModal] = React.useState(false)\n  const [openRemoveMicroserviceModal, setOpenRemoveMicroserviceModal] = React.useState(false)\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const { msvcsPerAgent, msvcs, agents, agent, setAgent, setAutozoom, loading } = props\n  const feedbackContext = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (e) => setMenuAnchorEl(e.currentTarget)\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  const openAddMicroservice = () => {\n    setOpenAddMicroserviceModal(true)\n    handleCloseMenu()\n  }\n  const openRemoveMicroservice = () => {\n    setOpenRemoveMicroserviceModal(true)\n    handleCloseMenu()\n  }\n\n  const openRemoveAgent = () => {\n    setOpenRemoveAgentConfirm(true)\n    handleCloseMenu()\n  }\n\n  const removeAgent = async (iofog) => {\n    try {\n      const response = await request(`/api/v3/iofog/${iofog.uuid}`, {\n        method: 'DELETE'\n      })\n      if (!response.ok) {\n        feedbackContext.pushFeedback({ message: `Failed to remove node: ${response.statusText}`, type: 'error' })\n      } else {\n        feedbackContext.pushFeedback({ message: 'Agent removed!', type: 'success' })\n      }\n      setOpenRemoveAgentConfirm(false)\n    } catch (e) {\n      feedbackContext.pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  return (\n    <React.Fragment>\n      <List\n        subheader={\n          <ListSubheader component='div' id='agent-list-subheader' style={{ position: 'relative' }} disableGutters disableSticky>\n            <div className={classes.listTitle}>\n              <div>\n                <Typography variant='h5'>Agents - <small>{loading ? 0 : agents.length} nodes</small></Typography>\n                {/* <small className={classes.link} onClick={() => setOpenConnectNodeModal(!openConnectNodeModal)}>+ Add node</small> */}\n              </div>\n              <div>\n                <small className={classes.link} onClick={() => setAutozoom(true)}>See all ECN</small>\n              </div>\n            </div>\n          </ListSubheader>\n        }\n      >\n        {(loading ? [] : agents).map(a => {\n          const msvcs = msvcsPerAgent[a.uuid] || []\n          return (\n            <ListItem button key={a.uuid} onClick={() => setAgent(a)} selected={a.uuid === agent.uuid}>\n              <ListItemAvatar>\n                <Avatar style={{ '--statusColor': statusColor[a.daemonStatus] }} className={classes.avatarList}>\n                  <MemoryIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={a.name} secondary={`${msvcs.length} Microservices`} />\n              <div className={classes.msvcChipList}>\n                {msvcs.map((m, idx) => (\n                  <React.Fragment key={m.uuid}>\n                    <Chip\n                      size='small'\n                      label={m.name}\n                      style={{\n                        '--mTop': idx ? '2px' : '0px',\n                        '--color': msvcStatusColor[(a.daemonStatus === 'RUNNING' && m.flowActive) ? 'RUNNING' : 'UNKNOWN']\n                      }}\n                      className={classes.msvcChip}\n                      title={m.name}\n                    />\n                  </React.Fragment>\n                ))}\n              </div>\n              <MoreIcon onClick={openMenu} />\n            </ListItem>\n          )\n        })}\n      </List>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${agent.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <SimpleTabs>\n          <ReactJson title='Agent' src={agent} name={false} />\n          <ReactJson title='Microservices' src={msvcsPerAgent[agent.uuid]} name={false} />\n        </SimpleTabs>\n      </Modal>\n      <Modal\n        {...{\n          open: openAddMicroserviceModal,\n          title: `Deploy microservice to ${agent.name}`,\n          onClose: () => setOpenAddMicroserviceModal(false)\n        }}\n      >\n        <AddMicroservice {...{\n          target: agent,\n          microservices: msvcs,\n          onSuccess: () => setOpenAddMicroserviceModal(false)\n        }} />\n      </Modal>\n      <Modal\n        {...{\n          open: openRemoveMicroserviceModal,\n          title: `Remove microservice from ${agent.name}`,\n          onClose: () => setOpenRemoveMicroserviceModal(false)\n        }}\n      >\n        <RemoveMicroservice\n          {...{\n            target: agent,\n            msvcs: msvcsPerAgent[agent.uuid] || [],\n            onSuccess: () => setOpenRemoveMicroserviceModal(false)\n          }}\n        />\n      </Modal>\n      <Modal\n        {...{\n          open: openConnectNodeModal,\n          title: `Connect agent`,\n          onClose: () => setOpenConnectNodeModal(false)\n        }}\n      >\n        <ConnectNode\n          {...{\n            controller: props.controller,\n            onSuccess: () => setOpenConnectNodeModal(false)\n          }}\n        />\n      </Modal>\n      <Confirm\n        {...{\n          open: openRemoveAgentConfirm,\n          title: `Remove agent: ${agent.name}`,\n          onClose: () => setOpenRemoveAgentConfirm(false),\n          onConfirm: () => removeAgent(agent)\n        }}\n      >\n        <Typography variant='h5'>Confirm removal of agent UUID: {agent.uuid}</Typography>\n      </Confirm>\n      <Menu\n        id='agent-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        {/* <MenuItem onClick={openRemoveAgent}>Remove agent</MenuItem> */}\n        {/* <Divider />\n        <MenuItem onClick={openAddMicroservice}>Add microservice</MenuItem>\n        <MenuItem onClick={openRemoveMicroservice}>Remove microservice</MenuItem> */}\n      </Menu>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport { isFinite, get } from 'lodash'\n\nimport GoogleMapReact from 'google-map-react'\nimport { fitBounds } from 'google-map-react/utils'\n\nimport { Badge, Avatar } from '@material-ui/core'\n\nimport MemoryIcon from '@material-ui/icons/Memory'\nimport CtrlIcon from '@material-ui/icons/DeveloperBoard'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor } from './utils'\n\nconst useStyles = makeStyles(theme => ({\n  mapMarkerTransform: {\n    transform: 'translate(-50%, -100%)',\n    position: 'absolute'\n  },\n  msvcBadge: {\n    '& .MuiBadge-badge': {\n      backgroundColor: `var(--color, ${theme.colors.cobalt})`\n    }\n  },\n  mapMarker: {\n    backgroundColor: `var(--markerColor, ${theme.colors.success})`,\n    borderRadius: '50% 50% 50% 0 !important',\n    border: `2px solid var(--markerColor, ${theme.colors.success})`,\n    transform: 'rotate(-45deg)',\n    '& .MuiSvgIcon-root': {\n      transform: 'rotate(-45deg)'\n    }\n  },\n  mapWrapper: {\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)',\n    borderRadius: '4px',\n    width: '100%',\n    height: '100%',\n    maxHeight: '700px',\n    position: 'sticky',\n    top: '25px',\n    borderColor: theme.colors.aluminium,\n    '& div': {\n      borderRadius: '4px',\n      '& div': {\n        borderRadius: '4px'\n      }\n    }\n  }\n}))\n\nconst hasValidCoordinates = (coordinates) => {\n  return isFinite(coordinates[0]) && isFinite(coordinates[1])\n}\n\nexport default function Map (props) {\n  const classes = useStyles()\n  const theme = useTheme()\n  const DomElementRef = React.useRef()\n  const { controller, agent, setAgent, msvcsPerAgent, map, autozoom, loading } = props\n\n  const setMap = () => {\n    const bounds = new window.google.maps.LatLngBounds() // need handler incase `google` not yet available\n\n    const agents = (controller.agents || []).filter(a => hasValidCoordinates([a.latitude, a.longitude]))\n\n    if (!agents.length) {\n      map.center = [get(controller, 'info.location.lat', 0), get(controller, 'info.location.lon', 0)]\n      map.zoom = 9\n      return\n    }\n\n    agents.forEach(marker => {\n      bounds.extend(new window.google.maps.LatLng(get(marker, 'latitude', 0), get(marker, 'longitude', 0)))\n    })\n\n    bounds.extend(new window.google.maps.LatLng(get(controller, 'info.location.lat', 0), get(controller, 'info.location.lon', 0)))\n\n    const newBounds = {\n      ne: {\n        lat: bounds.getNorthEast().lat(),\n        lng: bounds.getNorthEast().lng()\n      },\n      sw: {\n        lat: bounds.getSouthWest().lat(),\n        lng: bounds.getSouthWest().lng()\n      }\n    }\n\n    const size = {\n      width: get(DomElementRef, 'current.offsetWidth', 600),\n      height: get(DomElementRef, 'current.offsetHeight', 800)\n    }\n\n    const { center, zoom } = fitBounds(newBounds, size)\n    map.center = center\n    map.zoom = zoom\n  }\n\n  if (autozoom && window.google) {\n    setMap()\n  }\n\n  return (\n    <div className={classes.mapWrapper} ref={DomElementRef}>\n      <GoogleMapReact\n        {...map}\n        bootstrapURLKeys={{\n          key: 'AIzaSyChp_fUXiK05ulRl_ewRGKWsQ1k0ULIFkA'\n        }}\n      >\n        {(loading ? [] : controller.agents).filter(a => hasValidCoordinates([a.latitude, a.longitude])).map(a =>\n          <div\n            key={a.uuid}\n            lat={a.latitude} lng={a.longitude}\n            className={classes.mapMarkerTransform}\n            onClick={() => setAgent(a)}\n          >\n            <Badge color='primary' style={{ '--color': msvcStatusColor[a.daemonStatus] }} badgeContent={(msvcsPerAgent[a.uuid] || []).filter(m => m.flowActive).length} invisible={a.uuid !== agent.uuid} className={`${classes.msvcBadge}`}>\n              <Avatar\n                style={{ '--markerColor': statusColor[a.daemonStatus] }}\n                className={classes.mapMarker}>\n                <MemoryIcon />\n              </Avatar>\n            </Badge>\n          </div>\n        )}\n        {!loading && controller.info && hasValidCoordinates([controller.info.location.lat, controller.info.location.lon]) && <Avatar\n          lat={controller.info.location.lat}\n          lng={controller.info.location.lon}\n          style={{ '--markerColor': theme.colors.argon }}\n          className={classes.mapMarker}>\n          <CtrlIcon />\n        </Avatar>}\n      </GoogleMapReact>\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport { useInterval } from '../hooks/useInterval'\nimport { find, groupBy, get, isFinite } from 'lodash'\n\nimport Divider from '@material-ui/core/Divider'\nimport { makeStyles } from '@material-ui/styles'\n\nimport ControllerInfo from './ControllerInfo'\nimport ActiveResources from './ActiveResources'\nimport AgentList from './AgentList'\nimport Map from './Map'\n\n// import logo from '../assets/logo.png'\nimport './layout.scss'\n\nimport mapStyle from './mapStyle.json'\nimport { ControllerContext } from '../ControllerProvider'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '15px 0'\n  }\n})\n\nconst initState = {\n  controller: {\n    info: {\n      location: {},\n      user: {}\n    },\n    agents: [],\n    flows: [],\n    microservices: []\n  },\n  agent: {},\n  activeAgents: [],\n  activeFlows: [],\n  activeMsvcs: [],\n  msvcsPerAgent: []\n}\n\nexport const actions = {\n  UPDATE: 'UPDATE',\n  SET_AGENT: 'SET_AGENT'\n}\n\nconst updateData = (state, newController) => {\n  if (!newController) {\n    return state\n  }\n  const activeFlows = newController.flows.filter(f => f.isActivated === true)\n  const activeAgents = newController.agents.filter(a => a.daemonStatus === 'RUNNING')\n  const msvcsPerAgent = groupBy(newController.microservices.map(m => ({\n    ...m,\n    flowActive: !!find(activeFlows, f => m.flowId === f.id)\n  })), 'iofogUuid')\n  const activeMsvcs = activeAgents.reduce((res, a) => res.concat(get(msvcsPerAgent, a.uuid, []).filter(m => !!find(activeFlows, f => f.id === m.flowId)) || []), [])\n\n  if (!state.agent || !state.agent.uuid) {\n    state.agent = newController.agents[0] || {}\n  }\n\n  return {\n    ...state,\n    controller: newController,\n    activeFlows,\n    activeAgents,\n    activeMsvcs,\n    msvcsPerAgent\n  }\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.UPDATE:\n      return updateData(state, action.data)\n    case actions.SET_AGENT:\n      return {\n        ...state,\n        agent: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function ECNViewer () {\n  const classes = useStyles()\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const [autozoom, setAutozoom] = useState(true)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const [map, setMap] = useState({\n    center: [0, 0],\n    zoom: 15,\n    options: {\n      styles: mapStyle\n    }\n  })\n  const { controller: controllerInfo, request } = React.useContext(ControllerContext)\n  React.useEffect(() => {\n    setLoading(true)\n    setError(null)\n  }, [controllerInfo])\n\n  const update = async () => {\n    const agentsResponse = await request('/api/v3/iofog-list')\n    if (!agentsResponse.ok) {\n      setError({ message: agentsResponse.statusText })\n      return\n    }\n    const agents = (await agentsResponse.json()).fogs\n    const flowsResponse = await request('/api/v3/flow')\n    if (!flowsResponse.ok) {\n      setError({ message: flowsResponse.statusText })\n      return\n    }\n    const flows = (await flowsResponse.json()).flows\n\n    let microservices = []\n    for (const flow of flows) {\n      const microservicesResponse = await request(`/api/v3/microservices?flowId=${flow.id}`)\n      if (!flowsResponse.ok) {\n        setError({ message: microservicesResponse.statusText })\n        return\n      }\n      microservices = microservices.concat((await microservicesResponse.json()).microservices)\n    }\n    if (loading) {\n      setLoading(false)\n    }\n    if (error) {\n      setError(false)\n    }\n    dispatch({ type: actions.UPDATE, data: { agents, flows, microservices } })\n  }\n\n  useInterval(() => {\n    update()\n  }, [3000])\n\n  const setAgent = a => dispatch({ type: actions.SET_AGENT, data: a })\n\n  const selectAgent = (a) => {\n    setAgent(a)\n    if (isFinite(a.latitude) && isFinite(a.longitude)) {\n      setMap({ ...map, center: [a.latitude, a.longitude], zoom: 15 })\n      setAutozoom(false)\n    }\n  }\n\n  const selectController = () => {\n    setMap({ ...map, center: [controllerInfo.location.lat, controllerInfo.location.lon], zoom: 15 })\n    setAutozoom(false)\n  }\n\n  const centerMap = (coordinates) => { setMap({ ...map, center: coordinates }) }\n\n  const { controller, activeAgents, activeFlows, activeMsvcs, agent, msvcsPerAgent } = state\n  return (\n    <div className='viewer-layout-container'>\n      <div className='box sidebar'>\n        <ControllerInfo {...{ controller: controllerInfo, selectController, loading, error }} />\n        <Divider className={classes.divider} />\n        <ActiveResources {...{ activeAgents, activeFlows, activeMsvcs, loading }} />\n        <Divider className={classes.divider} />\n        <AgentList {...{ msvcsPerAgent, loading, msvcs: controller.microservices, agents: controller.agents, agent, setAgent: selectAgent, centerMap, setAutozoom, controller: controller.info }} />\n      </div>\n      <div className='map-grid-container'>\n        <Map {...{ controller: { ...controller, info: controllerInfo }, agent, setAgent, msvcsPerAgent, map, autozoom, setAutozoom, loading }} />\n      </div>\n    </div>\n  )\n}\n","import { useEffect, useRef } from 'react'\n\nexport function useInterval (callback, delay) {\n  const savedCallback = useRef()\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick () {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n","import React from 'react'\nimport { TextField, Grid, Button } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { FeedbackContext } from '../Utils/FeedbackContext'\n\nconst useStyles = makeStyles({\n  skeleton: {\n    minHeight: '55px'\n  }\n})\n\nexport default function Config (props) {\n  const classes = useStyles()\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { controller, updateController } = React.useContext(ControllerContext)\n  const [data, setData] = React.useState({ ...controller })\n\n  const save = async () => {\n    try {\n      await updateController(data)\n      pushFeedback({ message: 'Controller details saved!', type: 'success' })\n      props.onSave()\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value })\n  }\n  const handleUserChange = name => event => {\n    setData({ ...data, user: { ...data.user, [name]: event.target.value } })\n  }\n  return (\n    <React.Fragment>\n      {data.dev && <Grid container spacing={2} >\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='ip'\n            label='IP'\n            onChange={handleChange('ip')}\n            value={data.ip}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='port'\n            label='Port'\n            onChange={handleChange('port')}\n            value={data.port}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>}\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='email'\n            label='Email'\n            onChange={handleUserChange('email')}\n            value={data.user.email}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='password'\n            label='Password'\n            onChange={handleUserChange('password')}\n            value={data.user.password}\n            fullWidth\n            type='password'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={save}>\n            Save\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport { HashRouter, Route, Switch, NavLink, Redirect } from 'react-router-dom'\nimport Avatar from '@material-ui/core/Avatar'\nimport SearchIcon from '@material-ui/icons/Search'\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined'\nimport HomeIcon from '@material-ui/icons/HomeOutlined'\nimport FakeIcon1 from '@material-ui/icons/GraphicEqOutlined'\nimport SettingsIcon from '@material-ui/icons/SettingsOutlined'\n\nimport ECNViewer from '../ECNViewer'\nimport Modal from '../Utils/Modal'\nimport Config from '../Config'\nimport { ControllerContext } from '../ControllerProvider'\n\nimport logomark from '../assets/logomark.svg'\nimport './layout.scss'\n\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    color: theme.colors.carbon,\n    backgroundColor: theme.colors.silver\n  },\n  divider: {\n    margin: '15px 0'\n  },\n  logo: {\n    backgroundColor: theme.colors.phosphorus,\n    color: theme.colors.white\n  },\n  latNav: {\n    backgroundColor: theme.colors.carbon\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.phosphorus,\n    marginRight: '45px'\n  },\n  latIcons: {\n    margin: 'auto',\n    marginTop: '15px',\n    cursor: 'pointer',\n    backgroundColor: theme.colors.carbon,\n    '.active &': {\n      backgroundColor: theme.colors.aluminium\n    }\n  },\n  topIcons: {\n    height: '100%',\n    width: '25px',\n    marginRight: '25px',\n    cursor: 'pointer'\n  },\n  nav: {\n    marginBottom: '15px',\n    height: '50px',\n    '& a': {\n      height: '100%',\n      '& img': {\n        height: '100%'\n      }\n    }\n  },\n  footerContainer: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    justifyItems: 'center',\n    padding: '20px 10px 20px 0px'\n  },\n  footer: {\n    color: theme.colors.aluminium,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    fontSize: '9pt'\n  }\n}))\n\nexport default function Layout () {\n  const classes = useStyles()\n  const { controller } = React.useContext(ControllerContext)\n  const [settingsOpen, setSettingsOpen] = React.useState(!(controller.user.email && controller.user.password))\n\n  console.log(' ====> Rendering layout')\n\n  return <React.Fragment>\n    <HashRouter>\n      <div className={classes.wrapper + ' wrapper'}>\n        <div className={classes.logo + ' logo'}>\n          <NavLink to='/overview' >\n            <img src={logomark} alt='Edgeworx logomark' />\n          </NavLink>\n        </div>\n        <div className='topnav'>\n          <SearchIcon className={classes.topIcons} />\n          <NotificationsIcon className={classes.topIcons} />\n          <Avatar className={classes.avatarContainer} >M</Avatar>\n        </div>\n        <div className={classes.latNav + ' latnav'}>\n          <NavLink to='/overview' >\n            <Avatar className={classes.latIcons} >\n              <HomeIcon />\n            </Avatar>\n          </NavLink>\n          {/* <NavLink to='/routes' > */}\n          <Avatar className={classes.latIcons} >\n            <FakeIcon1 />\n          </Avatar>\n          {/* </NavLink> */}\n          <Avatar className={classes.latIcons} >\n            <SettingsIcon onClick={() => setSettingsOpen(!settingsOpen)} />\n          </Avatar>\n        </div>\n        <div className='content'>\n          <Switch>\n            {/* <Route path='/routes' component={() => 'Hello agents'} /> */}\n            <Route path='/overview' component={ECNViewer} />\n            <Route component={() => <Redirect to='/overview' />} />\n          </Switch>\n        </div>\n        <div className={`${classes.footerContainer} footer`}>\n          <span className={classes.footer}>Copyright  2019 Edgeworx, Inc. All Rights Reserved.</span>\n        </div>\n      </div>\n    </HashRouter>\n    <Modal\n      {...{\n        open: settingsOpen,\n        title: controller.dev ? `Controller details` : `User credentials`,\n        onClose: () => setSettingsOpen(false)\n      }}\n    >\n      <Config {...{ onSave: () => setSettingsOpen(false) }} />\n    </Modal>\n\n  </React.Fragment>\n}\n","import React from 'react'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\n\nimport Layout from './Layout'\n\nimport './App.css'\nimport FeedbackContext from './Utils/FeedbackContext'\nimport ThemeContext from './Theme/ThemeProvider'\nimport ControllerContext from './ControllerProvider'\n\nfunction App () {\n  console.log(' ======> Rendering app ')\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <ThemeContext>\n        <ControllerContext>\n          <FeedbackContext>\n            <Layout />\n          </FeedbackContext>\n        </ControllerContext>\n      </ThemeContext>\n    </React.Fragment>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}